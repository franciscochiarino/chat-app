{"ast":null,"code":"var _jsxFileName = \"/home/fran/Documents/chat-app/client/src/Chat.js\";\nimport React, { useEffect, useState } from 'react';\nimport io from 'socket.io-client';\nimport InfoBar from './InfoBar';\nimport Input from './Input';\nimport Messages from './Messages';\nconst socket = io();\nexport default function Chat({\n  name,\n  room,\n  chatWindow,\n  setChatWindow\n}) {\n  const [text, setText] = useState('');\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    // Emit JOIN\n    socket.emit('join', {\n      name,\n      room\n    }, error => {\n      if (error) {\n        sessionStorage.removeItem('name');\n        alert(error);\n        window.location.reload();\n      }\n    });\n    return () => {\n      // Emit DISCONNECT\n      socket.emit('disconnect'); // Turn off this socket\n\n      socket.off();\n    };\n  }, [name, room]);\n  useEffect(() => {\n    // Recieve MESSAGE\n    socket.on('message', message => {\n      setMessages(messages => [...messages, message]);\n    });\n  }, []);\n\n  const sendMessage = e => {\n    e.preventDefault();\n    console.log('sendMessage');\n\n    if (text) {\n      // Emit SENDMESSAGE\n      socket.emit('sendMessage', text, () => {\n        setText('');\n      });\n    }\n\n    if (messages.length >= 50) {\n      removeFirst();\n    }\n  };\n\n  const removeFirst = () => {\n    const [first, ...rest] = messages;\n    return setMessages(rest);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"outer-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inner-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(InfoBar, {\n    room: room,\n    chatWindow: chatWindow,\n    setChatWindow: setChatWindow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Messages, {\n    messages: messages,\n    name: name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    text: text,\n    setText: setText,\n    sendMessage: sendMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/home/fran/Documents/chat-app/client/src/Chat.js"],"names":["React","useEffect","useState","io","InfoBar","Input","Messages","socket","Chat","name","room","chatWindow","setChatWindow","text","setText","messages","setMessages","emit","error","sessionStorage","removeItem","alert","window","location","reload","off","on","message","sendMessage","e","preventDefault","console","log","length","removeFirst","first","rest"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport io from 'socket.io-client';\nimport InfoBar from './InfoBar';\nimport Input from './Input';\nimport Messages from './Messages';\n\nconst socket = io();\n\nexport default function Chat({ name, room, chatWindow, setChatWindow }) {\n  const [text, setText] = useState('');\n  const [messages, setMessages] = useState([]);\n\n  useEffect(() => {\n\n    // Emit JOIN\n    socket.emit('join', {name, room}, (error) => {\n      if (error) {\n        sessionStorage.removeItem('name');\n        alert(error);\n        window.location.reload()\n      }\n    });\n\n    return () => {\n      // Emit DISCONNECT\n      socket.emit('disconnect');\n      // Turn off this socket\n      socket.off();\n    }\n  }, [name, room])\n\n  useEffect(() => {\n    // Recieve MESSAGE\n    socket.on('message', (message) => {\n      setMessages((messages) => [...messages, message]);\n    })\n  }, []);\n\n  const sendMessage = e => {\n    e.preventDefault();\n    console.log('sendMessage')\n    if (text) {\n      // Emit SENDMESSAGE\n      socket.emit('sendMessage', text, () => {\n        setText('');\n      })\n    }\n    if (messages.length >= 50) {\n      removeFirst();\n    } \n  };\n\n  const removeFirst = () => {\n    const [first, ...rest] = messages;\n    return setMessages(rest);\n  };\n\n  return (\n    <div className=\"outer-container\">\n      <div className=\"inner-container\">\n        <InfoBar room={room} chatWindow={chatWindow} setChatWindow={setChatWindow} />\n        <Messages messages={messages} name={name} />\n        <Input text={text} setText={setText} sendMessage={sendMessage} />\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}